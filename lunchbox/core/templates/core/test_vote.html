  {% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
    </head>
    <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          <form class="navbar-form navbar-right">
            <div class="form-group">
              <input type="text" placeholder="Email" class="form-control">
            </div>
            <div class="form-group">
              <input type="password" placeholder="Password" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">Sign in</button>
          </form>
        </div><!--/.navbar-collapse -->
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="container">
      {% for restaurant in object_list %}
          {% if forloop.first %}
              <ol>
          {% endif %}
          <li data-id="http://foobar.com" class="votable">
          <h3><img src="http://placekitten.com/100/100"/>
          {{ restaurant.name }}</h3>
          </li>
          {% if forloop.last %}
              </ol>
          {% endif %}
      {% empty %}
          <div class="alert alert-warning">
              <strong>{% trans "Warning!" %}</strong> {% trans 'Nobody wants to eat yet' %}
          </div>
      {% endfor %}
      </div>

      <footer>
        <p>&copy; Company 2013</p>
      </footer>
    </div> <!-- /container -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
        <script type="application/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.3.1/jquery.cookie.js"></script>
        <script type="application/javascript" src={% static 'core/csrf.js' %}></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

    {% block js %}

        <script>
        var vote_for_pedro = function(ev) {
            ev.preventDefault();
            var li_elem = $(this)
            var rest = $(this).attr("data-id")
            $.ajax({
                type: "POST",
                url: "/vote/",
                data: {"restaurant": rest},
                success: function(val){
                    if (val == "ok") {
                        li_elem.css( {"border":"5px solid #00f"} )
                        //li_elem.addClass( "alert" )
                        console.log("include")
                    } else {
                        //li_elem.removeClass( "alert" )
                        li_elem.css( {"border": "none"} )
                        console.log("remove")

                    }
                }
            });

        }


        $(".votable").click(vote_for_pedro)


        </script>

    {% endblock %}


    </body>

</html>
